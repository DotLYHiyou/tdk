<!DOCTYPE html>
<html>
<head>
  <style>
    #ui {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 300px;
      height: 200px;
      background-color: lightgray;
    }
    #dragButton {
      cursor: move;
    }
  </style>
</head>
<body>
  <button onclick="openUI()">Open UI</button>

  <div id="ui" style="display:none">
    <button id="dragButton">Drag</button>
    <iframe src="https://www.example.com"></iframe>
  </div>

<script>
function openUI() {
  var ui = document.getElementById("ui");
  
  if (ui.style.display === "none") {
    ui.style.display = "block";
    
    // Make the UI draggable
    makeDraggable(ui);
    
    // Disable text selection while dragging
    disableTextSelection();
    
    // Prevent dragging from being sensitive
    preventSensitiveDragging();
    
  } else {
    ui.style.display = "none";
    
    // Remove draggable functionality when UI is closed
    removeDraggable(ui);
    
    // Enable text selection after closing the UI
    enableTextSelection();
    
   }
}

function makeDraggable(element) {
  var dragButton = element.querySelector("#dragButton");
  
  dragButton.addEventListener("mousedown", startDragging);

function startDragging(event) {
   event.preventDefault(); 
   
   var startX = event.clientX;
   var startY = event.clientY;

   document.addEventListener("mousemove", dragElement);
   document.addEventListener("mouseup", stopDragging);

function dragElement(event) {
   var deltaX = event.clientX - startX;
   var deltaY = event.clientY - startY;

   element.style.left = element.offsetLeft + deltaX + "px";
   element.style.top = element.offsetTop + deltaY + "px";

   startX = event.clientX;
   startY = event.clientY;
}

function stopDragging() {
  document.removeEventListener("mousemove", dragElement);
  document.removeEventListener("mouseup", stopDragging);
}
}

function removeDraggable(element) {
  var dragButton = element.querySelector("#dragButton");
  
  dragButton.removeEventListener("mousedown", startDragging);
}

function disableTextSelection() {
  document.body.style.userSelect = "none";
}

function enableTextSelection() {
  document.body.style.userSelect = "auto";
}

function preventSensitiveDragging() {
  document.addEventListener("mousemove", function(event) {
    event.preventDefault();
  }, { passive: false });
}
</script>
</body>
</html>
